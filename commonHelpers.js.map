{"version":3,"file":"commonHelpers.js","sources":["../src/JS/markup-cart-products.js","../src/JS/modal-cart.js","../src/cart.js"],"sourcesContent":["export const cartProductsList = document.querySelector('.cart-list');\n\nconst cartProductsInfo = JSON.parse(localStorage.getItem('cart-products-list'));\n\nconst createMarkup = cartProductsInfo => {\n  return cartProductsInfo\n    .map(\n      ({\n        _id,\n        name,\n        img,\n        category,\n        price,\n        size,\n        popularity,\n        quantity,\n        is10PercentOff,\n        desc,\n      }) =>\n        `<li class=\"card_container_product\" id=\"${_id}\">\n\n         <div class=\"description\">\n          <div class=\"card_container-product_img\">\n            <img class=\"card_product_img\" src=\"${img}\" alt=\"${name}\" />\n          </div>\n\n          <div class=\"card_container_product_fullDs\">\n            <div class=\"card_container_product_name\">\n              <h3 class=\"card_product_name\">${name}</h3>\n            </div>\n            <div class=\"card_container_product_description\">\n              <div class=\"card-description\">\n                <p class=\"cart_product_description\">\n                  <span class=\"cart_product_span\">Category:</span>${category}\n                </p>\n                <p class=\"cart_product_description\">\n                  <span class=\"cart_product_span\">Size:</span>${size}\n                </p>\n              </div>\n            </div>\n            <div class=\"card_container_price\">\n              <p class=\"card_product_price\">$${price}</p>\n            </div>\n          </div>\n          <div class=\"card-product-delete-button\">\n            <button type=\"button\" class=\"cart-product-delete-button id=\"${_id}\">\n              <svg class=\"cart-icon-close-\" width=\"18\" height=\"18\">\n                 <use href=\"./img/icons.svg#icon-delete-close\"></use>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n    </li>`\n    )\n    .join('');\n};\n\nexport const renderCartProducts = () => {\n  cartProductsList.innerHTML = ''\n  cartProductsList.insertAdjacentHTML(\n    'afterbegin',\n    createMarkup(cartProductsInfo)\n  );\n};\n\nexport const updateCartProducts = () => {\n  const productsArr = JSON.parse(localStorage.getItem('cart-products-list')) || [];\n  cartProductsList.innerHTML = '';\n  cartProductsList.insertAdjacentHTML('afterbegin', createMarkup(productsArr));\n};\n\n","\n\nconst modalCartByBuy = document.querySelector('.modal-cart');\nconst modalCartClose = document.querySelector('.close-btn');\n\nexport function displayByBuyModal() {\n  modalCartByBuy.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n}\n\n\nfunction handleModalClick(event) {\n  if (event.target === modalCartByBuy) {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  modalCartByBuy.classList.add('is-hidden');\n  document.body.style.overflow = 'visible';\n}\n\nwindow.addEventListener('click', handleModalClick);\nmodalCartClose.addEventListener('click', closeModal);\n","import {\n  renderCartProducts,\n  cartProductsList,\n  updateCartProducts,\n} from './JS/markup-cart-products';\n\nimport {\n  displayByBuyModal\n} from './JS/modal-cart';\n\nimport {\n  createNewOrder\n} from './JS/API';\n\nimport { showError } from './JS/helpers';\n\nrenderCartProducts();\n\nfunction updateCartFromLocalStorage() {\n  const productsInLocalStorage =\n    JSON.parse(localStorage.getItem('cart-products-list')) || [];\n  const objectsCount = productsInLocalStorage.length;\n  const quantityCart = document.querySelector('.quantity_products');\n  const quantityCartIcon = document.querySelector('.cart-span');\n  quantityCart.textContent = '(' + objectsCount + ')';\n  quantityCartIcon.textContent = '(' + objectsCount + ')'\n}\n\nupdateCartFromLocalStorage();\n\nconst deleteAllButton = document.querySelector(\n  '.cart-product-delete-all-button'\n);\n\nfunction deleteProductAndUpdateCart(productId) {\n  let productsArr =\n    JSON.parse(localStorage.getItem('cart-products-list')) || [];\n  const indexToDelete = productsArr.findIndex(\n    product => product._id === productId\n  );\n\n  if (indexToDelete !== -1) {\n    productsArr.splice(indexToDelete, 1);\n    localStorage.setItem('cart-products-list', JSON.stringify(productsArr));\n    updateCartProducts();\n    updateCartFromLocalStorage();\n  } else {\n    console.log('Product not found in cart');\n  }\n}\n\nconst cartContainer = document.querySelector('.cart-list');\n\nasync function handleProductClick(event) {\n  const clickedButton = event.target.closest('.card-product-delete-button');\n\n  if (clickedButton) {\n    const productId = clickedButton.closest('.card_container_product').id;\n    deleteProductAndUpdateCart(productId);\n  }\n  calculationTotalPrice();\n}\n\ncartContainer.addEventListener('click', handleProductClick);\n\nfunction deleteAllFromCart() {\n  localStorage.setItem('cart-products-list', JSON.stringify([]));\n  cartProductsList.innerHTML = '';\n  updateCartFromLocalStorage();\n  calculationTotalPrice();\n}\n\n// Додаємо обробник події для кнопки видалення всіх товарів\ndeleteAllButton.addEventListener('click', deleteAllFromCart);\n\nconst totalPriceProducts = document.querySelector('.cart_total_cost')\nfunction calculationTotalPrice() {\n\nconst objectProducts = JSON.parse(localStorage.getItem('cart-products-list'));\n\nconst totalPrice = objectProducts.reduce((acc, product) => {\n\n  return acc + product.price;\n}, 0);\n\ntotalPriceProducts.textContent = `$ ${totalPrice.toFixed(2)}`;\n  \n}\ncalculationTotalPrice();\n\nconst cartBtnSubmit = document.querySelector('.cart_form_button');\ncartBtnSubmit.addEventListener('click', makeOrder);\n\nfunction clearLocalStorage() {\n  localStorage.removeItem('cart-products-list');\n}\n\nasync function makeOrder() {\n  const emailInputValue = document.querySelector('.cart_form_input').value;\n  const objectProducts = JSON.parse(localStorage.getItem('cart-products-list'));\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  \n  if (!emailRegex.test(emailInputValue)) {\n    showError('Please, enter valid Email!');\n    return;\n  }\n\n  const orderObj = {\n    email: emailInputValue,\n    products: objectProducts,\n  };\nconsole.log(orderObj);\n  try {\n    const response = await createNewOrder(orderObj);\n    clearLocalStorage();\n    displayByBuyModal(response);\n  } catch (error) {\n    console.error('Error creating order:', error);\n    showError('Error creating order. Please try again later.');\n  }\n}\n\n"],"names":["cartProductsList","cartProductsInfo","createMarkup","_id","name","img","category","price","size","popularity","quantity","is10PercentOff","desc","renderCartProducts","updateCartProducts","productsArr","modalCartByBuy","modalCartClose","displayByBuyModal","handleModalClick","event","closeModal","updateCartFromLocalStorage","objectsCount","quantityCart","quantityCartIcon","deleteAllButton","deleteProductAndUpdateCart","productId","indexToDelete","product","cartContainer","handleProductClick","clickedButton","calculationTotalPrice","deleteAllFromCart","totalPriceProducts","totalPrice","acc","cartBtnSubmit","makeOrder","clearLocalStorage","emailInputValue","objectProducts","showError","orderObj","response","createNewOrder","error"],"mappings":"wGAAO,MAAMA,EAAmB,SAAS,cAAc,YAAY,EAE7DC,EAAmB,KAAK,MAAM,aAAa,QAAQ,oBAAoB,CAAC,EAExEC,EAAeD,GACZA,EACJ,IACC,CAAC,CACC,IAAAE,EACA,KAAAC,EACA,IAAAC,EACA,SAAAC,EACA,MAAAC,EACA,KAAAC,EACA,WAAAC,EACA,SAAAC,EACA,eAAAC,EACA,KAAAC,CACD,IACC,0CAA0CT;AAAA;AAAA;AAAA;AAAA,iDAIDE,WAAaD;AAAA;AAAA;AAAA;AAAA;AAAA,8CAKhBA;AAAA;AAAA;AAAA;AAAA;AAAA,oEAKsBE;AAAA;AAAA;AAAA,gEAGJE;AAAA;AAAA;AAAA;AAAA;AAAA,+CAKjBD;AAAA;AAAA;AAAA;AAAA,0EAI2BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UASrE,EACA,KAAK,EAAE,EAGCU,EAAqB,IAAM,CACtCb,EAAiB,UAAY,GAC7BA,EAAiB,mBACf,aACAE,EAAaD,CAAgB,CACjC,CACA,EAEaa,EAAqB,IAAM,CACtC,MAAMC,EAAc,KAAK,MAAM,aAAa,QAAQ,oBAAoB,CAAC,GAAK,GAC9Ef,EAAiB,UAAY,GAC7BA,EAAiB,mBAAmB,aAAcE,EAAaa,CAAW,CAAC,CAC7E,ECpEMC,EAAiB,SAAS,cAAc,aAAa,EACrDC,EAAiB,SAAS,cAAc,YAAY,EAEnD,SAASC,GAAoB,CAClCF,EAAe,UAAU,OAAO,WAAW,EAC3C,SAAS,KAAK,MAAM,SAAW,QACjC,CAGA,SAASG,EAAiBC,EAAO,CAC3BA,EAAM,SAAWJ,GACnBK,GAEJ,CAEA,SAASA,GAAa,CACpBL,EAAe,UAAU,IAAI,WAAW,EACxC,SAAS,KAAK,MAAM,SAAW,SACjC,CAEA,OAAO,iBAAiB,QAASG,CAAgB,EACjDF,EAAe,iBAAiB,QAASI,CAAU,ECPnDR,IAEA,SAASS,GAA6B,CAGpC,MAAMC,GADJ,KAAK,MAAM,aAAa,QAAQ,oBAAoB,CAAC,GAAK,IAChB,OACtCC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAmB,SAAS,cAAc,YAAY,EAC5DD,EAAa,YAAc,IAAMD,EAAe,IAChDE,EAAiB,YAAc,IAAMF,EAAe,GACtD,CAEAD,IAEA,MAAMI,EAAkB,SAAS,cAC/B,iCACF,EAEA,SAASC,EAA2BC,EAAW,CAC7C,IAAIb,EACF,KAAK,MAAM,aAAa,QAAQ,oBAAoB,CAAC,GAAK,GAC5D,MAAMc,EAAgBd,EAAY,UAChCe,GAAWA,EAAQ,MAAQF,CAC/B,EAEMC,IAAkB,IACpBd,EAAY,OAAOc,EAAe,CAAC,EACnC,aAAa,QAAQ,qBAAsB,KAAK,UAAUd,CAAW,CAAC,EACtED,IACAQ,KAEA,QAAQ,IAAI,2BAA2B,CAE3C,CAEA,MAAMS,EAAgB,SAAS,cAAc,YAAY,EAEzD,eAAeC,EAAmBZ,EAAO,CACvC,MAAMa,EAAgBb,EAAM,OAAO,QAAQ,6BAA6B,EAExE,GAAIa,EAAe,CACjB,MAAML,EAAYK,EAAc,QAAQ,yBAAyB,EAAE,GACnEN,EAA2BC,CAAS,CACrC,CACDM,GACF,CAEAH,EAAc,iBAAiB,QAASC,CAAkB,EAE1D,SAASG,GAAoB,CAC3B,aAAa,QAAQ,qBAAsB,KAAK,UAAU,CAAE,CAAA,CAAC,EAC7DnC,EAAiB,UAAY,GAC7BsB,IACAY,GACF,CAGAR,EAAgB,iBAAiB,QAASS,CAAiB,EAE3D,MAAMC,EAAqB,SAAS,cAAc,kBAAkB,EACpE,SAASF,GAAwB,CAIjC,MAAMG,EAFiB,KAAK,MAAM,aAAa,QAAQ,oBAAoB,CAAC,EAE1C,OAAO,CAACC,EAAKR,IAEtCQ,EAAMR,EAAQ,MACpB,CAAC,EAEJM,EAAmB,YAAc,KAAKC,EAAW,QAAQ,CAAC,GAE1D,CACAH,IAEA,MAAMK,EAAgB,SAAS,cAAc,mBAAmB,EAChEA,EAAc,iBAAiB,QAASC,CAAS,EAEjD,SAASC,GAAoB,CAC3B,aAAa,WAAW,oBAAoB,CAC9C,CAEA,eAAeD,GAAY,CACzB,MAAME,EAAkB,SAAS,cAAc,kBAAkB,EAAE,MAC7DC,EAAiB,KAAK,MAAM,aAAa,QAAQ,oBAAoB,CAAC,EAG5E,GAAI,CAFe,6BAEH,KAAKD,CAAe,EAAG,CACrCE,EAAU,4BAA4B,EACtC,MACD,CAED,MAAMC,EAAW,CACf,MAAOH,EACP,SAAUC,CACd,EACA,QAAQ,IAAIE,CAAQ,EAClB,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAeF,CAAQ,EAC9CJ,IACAvB,EAAkB4B,CAAQ,CAC3B,OAAQE,EAAP,CACA,QAAQ,MAAM,wBAAyBA,CAAK,EAC5CJ,EAAU,+CAA+C,CAC1D,CACH"}