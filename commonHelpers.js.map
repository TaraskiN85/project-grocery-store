{"version":3,"file":"commonHelpers.js","sources":["../src/JS/markup-cart-products.js","../src/cart.js","../src/JS/modal-cart.js"],"sourcesContent":["export const cartProductsList = document.querySelector('.cart-list');\n\nconst cartProductsInfo = JSON.parse(localStorage.getItem('cart-products-list'));\n\nconst createMarkup = cartProductsInfo => {\n  return cartProductsInfo\n    .map(\n      ({\n        _id,\n        name,\n        img,\n        category,\n        price,\n        size,\n        popularity,\n        quantity,\n        is10PercentOff,\n        desc,\n      }) =>\n        `<li class=\"card_container_product\" id=\"${_id}\">\n\n         <div class=\"description\">\n          <div class=\"card_container-product_img\">\n            <img class=\"card_product_img\" src=\"${img}\" alt=\"${name}\" />\n          </div>\n\n          <div class=\"card_container_product_fullDs\">\n            <div class=\"card_container_product_name\">\n              <h3 class=\"card_product_name\">${name}</h3>\n            </div>\n            <div class=\"card_container_product_description\">\n              <div class=\"card-description\">\n                <p class=\"cart_product_description\">\n                  <span class=\"cart_product_span\">Category:</span>${category}\n                </p>\n                <p class=\"cart_product_description\">\n                  <span class=\"cart_product_span\">Size:</span>${size}\n                </p>\n              </div>\n            </div>\n            <div class=\"card_container_price\">\n              <p class=\"card_product_price\">$${price}</p>\n            </div>\n          </div>\n          <div class=\"card-product-delete-button\">\n            <button type=\"button\" class=\"cart-product-delete-button id=\"${_id}\">\n              <svg class=\"cart-icon-close-\" width=\"18\" height=\"18\">\n                 <use href=\"./img/icons.svg#icon-delete-close\"></use>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n    </li>`\n    )\n    .join('');\n};\n\nexport const renderCartProducts = () => {\n  cartProductsList.innerHTML = ''\n  cartProductsList.insertAdjacentHTML(\n    'afterbegin',\n    createMarkup(cartProductsInfo)\n  );\n};\n\nexport const updateCartProducts = () => {\n  const productsArr = JSON.parse(localStorage.getItem('cart-products-list')) || [];\n  cartProductsList.innerHTML = '';\n  cartProductsList.insertAdjacentHTML('afterbegin', createMarkup(productsArr));\n};\n\n","import {\n  renderCartProducts,\n  cartProductsList,\n  updateCartProducts,\n} from './JS/markup-cart-products';\n\nrenderCartProducts();\n\nfunction updateCartFromLocalStorage() {\n  const productsInLocalStorage =\n    JSON.parse(localStorage.getItem('cart-products-list')) || [];\n  const objectsCount = productsInLocalStorage.length;\n  const quantityCart = document.querySelector('.quantity_products');\n  const quantityCartIcon = document.querySelector('.cart-span');\n  quantityCart.textContent = '(' + objectsCount + ')';\n  quantityCartIcon.textContent = '(' + objectsCount + ')'\n}\n\nupdateCartFromLocalStorage();\n\nconst deleteAllButton = document.querySelector(\n  '.cart-product-delete-all-button'\n);\n\nfunction deleteProductAndUpdateCart(productId) {\n  let productsArr =\n    JSON.parse(localStorage.getItem('cart-products-list')) || [];\n  const indexToDelete = productsArr.findIndex(\n    product => product._id === productId\n  );\n\n  if (indexToDelete !== -1) {\n    productsArr.splice(indexToDelete, 1);\n    localStorage.setItem('cart-products-list', JSON.stringify(productsArr));\n    updateCartProducts();\n    updateCartFromLocalStorage();\n  } else {\n    console.log('Product not found in cart');\n  }\n}\n\nconst cartContainer = document.querySelector('.cart-list');\n\nasync function handleProductClick(event) {\n  const clickedButton = event.target.closest('.card-product-delete-button');\n\n  if (clickedButton) {\n    const productId = clickedButton.closest('.card_container_product').id;\n    deleteProductAndUpdateCart(productId);\n  }\n  calculationTotalPrice();\n}\n\ncartContainer.addEventListener('click', handleProductClick);\n\nfunction deleteAllFromCart() {\n  localStorage.setItem('cart-products-list', JSON.stringify([]));\n  cartProductsList.innerHTML = '';\n  updateCartFromLocalStorage();\n  calculationTotalPrice();\n}\n\n// Додаємо обробник події для кнопки видалення всіх товарів\ndeleteAllButton.addEventListener('click', deleteAllFromCart);\n\nconst totalPriceProducts = document.querySelector('.cart_total_cost')\nfunction calculationTotalPrice() {\n\nconst objectProducts = JSON.parse(localStorage.getItem('cart-products-list'));\n\nconst totalPrice = objectProducts.reduce((acc, product) => {\n\n  return acc + product.price;\n}, 0);\n\ntotalPriceProducts.textContent = `$ ${totalPrice.toFixed(2)}`;\n  \n}\ncalculationTotalPrice();\n\n\n\n","\n\nconst cartBtnSubmit = document.querySelector('.cart_form_button');\nconst modalCartByBuy = document.querySelector('.modal-cart');\nconst modalCartClose = document.querySelector('.close-btn');\n\nfunction displayByBuyModal(event) {\n  event.preventDefault();\n\n  const emailInputValue = document.querySelector('.cart_form_input').value;\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  if (!emailRegex.test(emailInputValue)) {\n    alert('Please, enter valid Email.');\n    return;\n  }\n  modalCartByBuy.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n}\n\nfunction handleModalClick(event) {\n  if (event.target === modalCartByBuy) {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  modalCartByBuy.classList.add('is-hidden');\n  document.body.style.overflow = 'visible';\n}\n\ncartBtnSubmit.addEventListener('click', displayByBuyModal);\nwindow.addEventListener('click', handleModalClick);\nmodalCartClose.addEventListener('click', closeModal);\n"],"names":["cartProductsList","cartProductsInfo","createMarkup","_id","name","img","category","price","size","popularity","quantity","is10PercentOff","desc","renderCartProducts","updateCartProducts","productsArr","updateCartFromLocalStorage","objectsCount","quantityCart","quantityCartIcon","deleteAllButton","deleteProductAndUpdateCart","productId","indexToDelete","product","cartContainer","handleProductClick","event","clickedButton","calculationTotalPrice","deleteAllFromCart","totalPriceProducts","totalPrice","acc","cartBtnSubmit","modalCartByBuy","modalCartClose","displayByBuyModal","emailInputValue","handleModalClick","closeModal"],"mappings":"qFAAO,MAAMA,EAAmB,SAAS,cAAc,YAAY,EAE7DC,EAAmB,KAAK,MAAM,aAAa,QAAQ,oBAAoB,CAAC,EAExEC,EAAeD,GACZA,EACJ,IACC,CAAC,CACC,IAAAE,EACA,KAAAC,EACA,IAAAC,EACA,SAAAC,EACA,MAAAC,EACA,KAAAC,EACA,WAAAC,EACA,SAAAC,EACA,eAAAC,EACA,KAAAC,CACD,IACC,0CAA0CT;AAAA;AAAA;AAAA;AAAA,iDAIDE,WAAaD;AAAA;AAAA;AAAA;AAAA;AAAA,8CAKhBA;AAAA;AAAA;AAAA;AAAA;AAAA,oEAKsBE;AAAA;AAAA;AAAA,gEAGJE;AAAA;AAAA;AAAA;AAAA;AAAA,+CAKjBD;AAAA;AAAA;AAAA;AAAA,0EAI2BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UASrE,EACA,KAAK,EAAE,EAGCU,EAAqB,IAAM,CACtCb,EAAiB,UAAY,GAC7BA,EAAiB,mBACf,aACAE,EAAaD,CAAgB,CACjC,CACA,EAEaa,EAAqB,IAAM,CACtC,MAAMC,EAAc,KAAK,MAAM,aAAa,QAAQ,oBAAoB,CAAC,GAAK,GAC9Ef,EAAiB,UAAY,GAC7BA,EAAiB,mBAAmB,aAAcE,EAAaa,CAAW,CAAC,CAC7E,EChEAF,IAEA,SAASG,GAA6B,CAGpC,MAAMC,GADJ,KAAK,MAAM,aAAa,QAAQ,oBAAoB,CAAC,GAAK,IAChB,OACtCC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAmB,SAAS,cAAc,YAAY,EAC5DD,EAAa,YAAc,IAAMD,EAAe,IAChDE,EAAiB,YAAc,IAAMF,EAAe,GACtD,CAEAD,IAEA,MAAMI,EAAkB,SAAS,cAC/B,iCACF,EAEA,SAASC,EAA2BC,EAAW,CAC7C,IAAIP,EACF,KAAK,MAAM,aAAa,QAAQ,oBAAoB,CAAC,GAAK,GAC5D,MAAMQ,EAAgBR,EAAY,UAChCS,GAAWA,EAAQ,MAAQF,CAC/B,EAEMC,IAAkB,IACpBR,EAAY,OAAOQ,EAAe,CAAC,EACnC,aAAa,QAAQ,qBAAsB,KAAK,UAAUR,CAAW,CAAC,EACtED,IACAE,KAEA,QAAQ,IAAI,2BAA2B,CAE3C,CAEA,MAAMS,EAAgB,SAAS,cAAc,YAAY,EAEzD,eAAeC,EAAmBC,EAAO,CACvC,MAAMC,EAAgBD,EAAM,OAAO,QAAQ,6BAA6B,EAExE,GAAIC,EAAe,CACjB,MAAMN,EAAYM,EAAc,QAAQ,yBAAyB,EAAE,GACnEP,EAA2BC,CAAS,CACrC,CACDO,GACF,CAEAJ,EAAc,iBAAiB,QAASC,CAAkB,EAE1D,SAASI,GAAoB,CAC3B,aAAa,QAAQ,qBAAsB,KAAK,UAAU,CAAE,CAAA,CAAC,EAC7D9B,EAAiB,UAAY,GAC7BgB,IACAa,GACF,CAGAT,EAAgB,iBAAiB,QAASU,CAAiB,EAE3D,MAAMC,EAAqB,SAAS,cAAc,kBAAkB,EACpE,SAASF,GAAwB,CAIjC,MAAMG,EAFiB,KAAK,MAAM,aAAa,QAAQ,oBAAoB,CAAC,EAE1C,OAAO,CAACC,EAAKT,IAEtCS,EAAMT,EAAQ,MACpB,CAAC,EAEJO,EAAmB,YAAc,KAAKC,EAAW,QAAQ,CAAC,GAE1D,CACAH,EAAuB,EC5EvB,MAAMK,EAAgB,SAAS,cAAc,mBAAmB,EAC1DC,EAAiB,SAAS,cAAc,aAAa,EACrDC,EAAiB,SAAS,cAAc,YAAY,EAE1D,SAASC,EAAkBV,EAAO,CAChCA,EAAM,eAAc,EAEpB,MAAMW,EAAkB,SAAS,cAAc,kBAAkB,EAAE,MAEnE,GAAI,CADe,6BACH,KAAKA,CAAe,EAAG,CACrC,MAAM,4BAA4B,EAClC,MACD,CACDH,EAAe,UAAU,OAAO,WAAW,EAC3C,SAAS,KAAK,MAAM,SAAW,QACjC,CAEA,SAASI,EAAiBZ,EAAO,CAC3BA,EAAM,SAAWQ,GACnBK,GAEJ,CAEA,SAASA,GAAa,CACpBL,EAAe,UAAU,IAAI,WAAW,EACxC,SAAS,KAAK,MAAM,SAAW,SACjC,CAEAD,EAAc,iBAAiB,QAASG,CAAiB,EACzD,OAAO,iBAAiB,QAASE,CAAgB,EACjDH,EAAe,iBAAiB,QAASI,CAAU"}