{"version":3,"file":"footer-subscription-63044206.js","sources":["../../src/JS/API.js","../../src/JS/helpers.js","../../src/JS/footer-subscription.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/';\n\nexport const getProductsByParams = async () => {\n  let FULL_URL = `${BASE_URL}products/?`;\n  const optionsObj = JSON.parse(localStorage.getItem('search-params'));\n  for (const key in optionsObj) {\n    FULL_URL += `&${key}=${optionsObj[key].toString()}`;\n  }\n\n  const res = await axios.get(FULL_URL);\n  const data = await res.data;\n  localStorage.setItem('fetched-products', JSON.stringify(data.results));\n  return data;\n};\n\nexport const getProductsCategories = async () => {\n  const res = await axios.get(`${BASE_URL}products/categories/`);\n  const data = await res.data;\n  localStorage.setItem('product-categories', JSON.stringify(data));\n  return await res.data;\n};\n\nexport const getDiscountProducts = async () => {\n  const res = await axios.get(`${BASE_URL}products/discount/`);\n  return await res.data;\n};\n\nexport const getPopularProducts = async (limit = 5) => {\n  const FULL_URL = Number.isInteger(limit)\n    ? `${BASE_URL}products/popular/?limit=${limit}`\n    : `${BASE_URL}products/popular/`;\n\n  const res = await axios.get(FULL_URL);\n  return await res.data;\n};\n\nexport const getProductById = async id => {\n  const res = await axios.get(`${BASE_URL}products/${id}`);\n  return await res.data;\n};\n\nexport const createNewOrder = async orderObj => {\n  const res = await axios.post(`${BASE_URL}orders/`, JSON.stringify(orderObj));\n  return await res.data;\n};\n\nexport const orderSubscription = async email => {\n  const res = await axios.post(`${BASE_URL}subscription/`, {\n    email: `${email}`,\n  });\n  return await res.data;\n};\n","import swal from 'sweetalert';\n\nexport const showError = message => {\n  swal('Error!', `${message}`, {\n    className: 'swal-red',\n    icon: 'error',\n    buttons: false,\n    timer: 5000,\n  });\n};\n\nexport const showSuccess = message => {\n  swal('Success!', `${message}`, {\n    className: 'swal-green',\n    icon: 'success',\n    buttons: false,\n    timer: 5000,\n  });\n};\n","import { orderSubscription } from './API';\nimport { showError, showSuccess } from './helpers';\nconst form = document.querySelector('.footer-form');\nform.addEventListener('submit', onSubscribe);\n\nasync function onSubscribe(event) {\n  event.preventDefault();\n  const email = form.querySelector('#footer-email').value;\n\n  try {\n    if (!email) {\n      showError('Email is required!');\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      showError('Please, enter valid Email!');\n    }\n    const res = await orderSubscription(email);\n    form.querySelector('#footer-email').value = '';\n    showSuccess(res.message);\n  } catch (error) {\n    error.response.data.message\n      ? showError(error.response.data.message)\n      : showError('Ooops! There`s an Error! Please, try again later!');\n  }\n}\n"],"names":["BASE_URL","getProductsByParams","FULL_URL","optionsObj","key","data","axios","getProductsCategories","res","getDiscountProducts","getPopularProducts","limit","getProductById","id","orderSubscription","email","showError","message","swal","showSuccess","form","onSubscribe","event","error"],"mappings":"svBAEA,MAAMA,EAAW,0CAEJC,EAAsB,SAAY,CAC7C,IAAIC,EAAW,GAAGF,cAClB,MAAMG,EAAa,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,EACnE,UAAWC,KAAOD,EAChBD,GAAY,IAAIE,KAAOD,EAAWC,GAAK,SAAU,IAInD,MAAMC,EAAO,MADD,MAAMC,EAAM,IAAIJ,CAAQ,GACb,KACvB,oBAAa,QAAQ,mBAAoB,KAAK,UAAUG,EAAK,OAAO,CAAC,EAC9DA,CACT,EAEaE,EAAwB,SAAY,CAC/C,MAAMC,EAAM,MAAMF,EAAM,IAAI,GAAGN,uBAA8B,EACvDK,EAAO,MAAMG,EAAI,KACvB,oBAAa,QAAQ,qBAAsB,KAAK,UAAUH,CAAI,CAAC,EACxD,MAAMG,EAAI,IACnB,EAEaC,EAAsB,SAE1B,MADK,MAAMH,EAAM,IAAI,GAAGN,qBAA4B,GAC1C,KAGNU,EAAqB,MAAOC,EAAQ,IAAM,CACrD,MAAMT,EAAW,OAAO,UAAUS,CAAK,EACnC,GAAGX,4BAAmCW,IACtC,GAAGX,qBAGP,OAAO,MADK,MAAMM,EAAM,IAAIJ,CAAQ,GACnB,IACnB,EAEaU,EAAiB,MAAMC,GAE3B,MADK,MAAMP,EAAM,IAAI,GAAGN,aAAoBa,GAAI,GACtC,KAQNC,EAAoB,MAAMC,GAI9B,MAHK,MAAMT,EAAM,KAAK,GAAGN,iBAAyB,CACvD,MAAO,GAAGe,GACd,CAAG,GACgB,KClDNC,EAAYC,GAAW,CAClCC,EAAK,SAAU,GAAGD,IAAW,CAC3B,UAAW,WACX,KAAM,QACN,QAAS,GACT,MAAO,GACX,CAAG,CACH,EAEaE,EAAcF,GAAW,CACpCC,EAAK,WAAY,GAAGD,IAAW,CAC7B,UAAW,aACX,KAAM,UACN,QAAS,GACT,MAAO,GACX,CAAG,CACH,EChBMG,EAAO,SAAS,cAAc,cAAc,EAClDA,EAAK,iBAAiB,SAAUC,CAAW,EAE3C,eAAeA,EAAYC,EAAO,CAChCA,EAAM,eAAc,EACpB,MAAMP,EAAQK,EAAK,cAAc,eAAe,EAAE,MAElD,GAAI,CACGL,GACHC,EAAU,oBAAoB,EAGb,6BACH,KAAKD,CAAK,GACxBC,EAAU,4BAA4B,EAExC,MAAMR,EAAM,MAAMM,EAAkBC,CAAK,EACzCK,EAAK,cAAc,eAAe,EAAE,MAAQ,GAC5CD,EAAYX,EAAI,OAAO,CACxB,OAAQe,EAAP,CACAA,EAAM,SAAS,KAAK,QAChBP,EAAUO,EAAM,SAAS,KAAK,OAAO,EACrCP,EAAU,mDAAmD,CAClE,CACH"}