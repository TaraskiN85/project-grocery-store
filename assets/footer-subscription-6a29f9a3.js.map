{"version":3,"file":"footer-subscription-6a29f9a3.js","sources":["../../src/JS/API.js","../../src/JS/footer-subscription.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://food-boutique.b.goit.study/api/';\n\nexport const getProductsByParams = async () => {\n  let FULL_URL = `${BASE_URL}products/?`;\n  const optionsObj = JSON.parse(localStorage.getItem('search-params'));\n  for (const key in optionsObj) {\n    FULL_URL += `&${key}=${optionsObj[key].toString()}`;\n  }\n\n  const res = await axios.get(FULL_URL);\n  const data = await res.data;\n  localStorage.setItem('fetched-products', JSON.stringify(data.results));\n  return data;\n};\n\nexport const getProductsCategories = async () => {\n  const res = await axios.get(`${BASE_URL}products/categories/`);\n  const data = await res.data;\n  localStorage.setItem('product-categories', JSON.stringify(data));\n  return await res.data;\n};\n\nexport const getDiscountProducts = async () => {\n  const res = await axios.get(`${BASE_URL}products/discount/`);\n  return await res.data;\n};\n\nexport const getPopularProducts = async (limit = 5) => {\n  const FULL_URL = Number.isInteger(limit)\n    ? `${BASE_URL}products/popular/?limit=${limit}`\n    : `${BASE_URL}products/popular/`;\n\n  const res = await axios.get(FULL_URL);\n  return await res.data;\n};\n\nexport const getProductById = async id => {\n  const res = await axios.get(`${BASE_URL}products/${id}`);\n  return await res.data;\n};\n\nexport const createNewOrder = async orderObj => {\n  const res = await axios.post(`${BASE_URL}orders/`, JSON.stringify(orderObj));\n  return await res.data;\n};\n\nexport const orderSubscription = async email => {\n  const res = await axios.post(`${BASE_URL}subscription/`, {\n    email: `${email}`,\n  });\n  return await res.data;\n};\n","// import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { orderSubscription } from './API';\n\nconst form = document.querySelector('.footer-form');\nform.addEventListener('submit', onSubscribe);\n\nasync function onSubscribe(event) {\n  event.preventDefault();\n  const email = form.querySelector('#footer-email').value;\n\n  try {\n    if (!email) {\n      throw new Error('Email is required!');\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      // alert('Please, enter valid Email.');\n    throw new Error('Invalid email format!');\n       }\n\n      const message = await orderSubscription(email);\n      console.log(message);\n      form.querySelector('#footer-email').value = '';\n    alert('Thank you for subscribe!');\n    // Notify.success('Thank you for subscribe!');\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n"],"names":["BASE_URL","getProductsByParams","FULL_URL","optionsObj","key","data","axios","getProductsCategories","res","getDiscountProducts","getPopularProducts","limit","getProductById","id","orderSubscription","email","form","onSubscribe","event","message","error"],"mappings":"+uBAEA,MAAMA,EAAW,0CAEJC,EAAsB,SAAY,CAC7C,IAAIC,EAAW,GAAGF,cAClB,MAAMG,EAAa,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,EACnE,UAAWC,KAAOD,EAChBD,GAAY,IAAIE,KAAOD,EAAWC,GAAK,SAAU,IAInD,MAAMC,EAAO,MADD,MAAMC,EAAM,IAAIJ,CAAQ,GACb,KACvB,oBAAa,QAAQ,mBAAoB,KAAK,UAAUG,EAAK,OAAO,CAAC,EAC9DA,CACT,EAEaE,EAAwB,SAAY,CAC/C,MAAMC,EAAM,MAAMF,EAAM,IAAI,GAAGN,uBAA8B,EACvDK,EAAO,MAAMG,EAAI,KACvB,oBAAa,QAAQ,qBAAsB,KAAK,UAAUH,CAAI,CAAC,EACxD,MAAMG,EAAI,IACnB,EAEaC,EAAsB,SAE1B,MADK,MAAMH,EAAM,IAAI,GAAGN,qBAA4B,GAC1C,KAGNU,EAAqB,MAAOC,EAAQ,IAAM,CACrD,MAAMT,EAAW,OAAO,UAAUS,CAAK,EACnC,GAAGX,4BAAmCW,IACtC,GAAGX,qBAGP,OAAO,MADK,MAAMM,EAAM,IAAIJ,CAAQ,GACnB,IACnB,EAEaU,EAAiB,MAAMC,GAE3B,MADK,MAAMP,EAAM,IAAI,GAAGN,aAAoBa,GAAI,GACtC,KAQNC,EAAoB,MAAMC,GAI9B,MAHK,MAAMT,EAAM,KAAK,GAAGN,iBAAyB,CACvD,MAAO,GAAGe,GACd,CAAG,GACgB,KCjDbC,EAAO,SAAS,cAAc,cAAc,EAClDA,EAAK,iBAAiB,SAAUC,CAAW,EAE3C,eAAeA,EAAYC,EAAO,CAChCA,EAAM,eAAc,EACpB,MAAMH,EAAQC,EAAK,cAAc,eAAe,EAAE,MAElD,GAAI,CACF,GAAI,CAACD,EACH,MAAM,IAAI,MAAM,oBAAoB,EAItC,GAAI,CADe,6BACH,KAAKA,CAAK,EAE1B,MAAM,IAAI,MAAM,uBAAuB,EAGrC,MAAMI,EAAU,MAAML,EAAkBC,CAAK,EAC7C,QAAQ,IAAII,CAAO,EACnBH,EAAK,cAAc,eAAe,EAAE,MAAQ,GAC9C,MAAM,0BAA0B,CAE/B,OAAQI,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACL"}